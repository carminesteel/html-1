<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.js"></script>   
<title>[교수입력하기]</title>
</head>
<body>
   <h1>[교수입력]</h1>
   <div>
   교수번호:   <input type=text id=txtPcode>
   교수명:<input type=text id=txtPname>
   <input type=button id=btnSave value=저장>
   </div>
   
   <h1>[교수목록]</h1>
   <table id=tab border=1 width=650></table>
   <script id=temp type=text/x-handlebars-template>
      <tr class=title>
         <td>교수번호</td>
         <td>교수명</td>
      </tr>

      {{#each .}}
      <tr class=row>
         <td class=pcode>{{pcode}}</td>
         <td>{{pname}}</td>
      </tr>
      {{/each}}
   </script>
</body>

<script>
   
   //저장 버튼을 클릭했을 때
   $("#btnInsert").on("click", function(){
      if(!confirm("저장하시겠습니까?")) return;
      
      var pcode=$("#textPcode").val();
      var pname=$("#textPname").val();
      
      if(pcode.length==0 || pcode.length !=3){
         alert("교수번호를 다시 입력하세요~!");
         $("#textPcode").focus();
      }else if(pname.length==0){
         alert("교수명을 입력하세요!");
         $("#textPname").focus();
      
      }		else{
			$.ajax({
				type:"get",
				url:"pinsert.jsp",
				data:{"pcode":pcode, "pname":pname},
				dataType:"json",
				success:function(data){
					alert("저장됐지롱");
					$("#textpcode").val("");
					$("#textpname").val("");
					$("#textpcode").focus();
					var temp=Handlebars.compile($("#temp").html());
					$("#tab").html(temp(data));
				}
			});
		}
   });
   
</script>
</html>